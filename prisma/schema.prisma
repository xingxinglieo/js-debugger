// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Question {
  id         Int        @id @default(autoincrement())
  createTime DateTime   @default(now())
  title      String // 题目
  content    String // 内容
  difficulty Int // 难度 1-4 入门 简单 中等 困难 
  categories Category[] // 分类 n-1 关系
  samples    Sample[] // 输入输出例子 1-n 关系
  problem    Problem? // 具体代码题目 1-1 关系
}

model Problem {
  id           Int           @id @default(autoincrement())
  createTime   DateTime      @default(now())
  question     Question      @relation(fields: [questionId], references: [id])
  questionId   Int           @unique
  template     String // 默认显示的模板
  callee       String // 调用函数名
  cases         ProblemCase[] // 测试用例
  injects      Inject[] // 函数注入 
  answerInjectId Int // 答案函数注入
  testInjectId Int // 测试函数注入 的 id
}

model Inject {
  id          Int       @id @default(autoincrement())
  content     String //注入的内容
  description String // 描述
  callee      String // 函数/类 名
  problems    Problem[]
}

model Sample {
  id         Int      @id @default(autoincrement())
  input      String // 输入
  note       String // 解释
  output     String // 输出
  question   Question @relation(fields: [questionId], references: [id])
  questionId Int
}

model Category {
  id        Int        @id @default(autoincrement())
  name      String     @unique
  questions Question[]
}

model ProblemCase {
  id        Int     @id @default(autoincrement())
  problem   Problem @relation(fields: [problemId], references: [id])
  problemId Int
}
